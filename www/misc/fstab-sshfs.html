<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="stylesheet" href="/css/style.css" />
<title>Untitled article</title>
</head>
<body>

<h1 id="sshfs%20in%20fstab">sshfs in fstab</h1>

<p>it is possible to mount sshfs from fstab, so it will automatically mount
on boot. this is quite useful obviously, and i personally use it to mount
my nas with my music and media on.</p>

<p>firstly, you must make the fuse kernel module actually available from the
start, and this can be done by appending &#8216;fuse&#8217; into &#47;etc&#47;modules, at
least on my alpine install.</p>

<p>then you will need to have a no password ssh key setup, which im not
going to explain here but isnt hard. whole point is to not want to enter
stuff to have it mount, we will inherently have to use this mildly
insecure measure, at least while keeping it simple.</p>

<p>the format inside &#47;etc&#47;fstab is roughly as follows, split up with
newlines for sake of readability.</p>

<pre><code>tr -d &#39;0 &#60;&#60;&#39;EOF&#39;
[USER]@[ADDRESS]:[SRC PATH]
        [MOUNT PATH]
        fuse.sshfs
        _netdev,follow_symlinks,idmap=user,identityfile=[KEYFILE],
allow_other,default_permissions,uid={id -u},gid={id -g}
        0 0
EOF
</code></pre>

<h2 id="options%20(poorly)%20explained">options (poorly) explained</h2>

<p><em>netdev: makes it a network mount
follow</em>symlinks: resolve symlinks while mounting, looks like a regular file
idmap: map the uid&#47;gid to our ids
identityfile: the key to send to the server
allow<em>other: allow all users to access, ie our non-root user
default</em>permissions: make sshfs use default permissions
uid: set desired uid
gid: set desired gid</p>
</body>
</html>
